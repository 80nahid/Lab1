@startuml

'receivers
    class KlaxonReceiver
    class AlertReciever
    AlertReciever o-- NM
    AlertReciever o-- AlertActivityFS
    AlertReciever o-- AlertActivity

'services and activites
    class Klaxon
    class AlertActivity
    class AlertActivityFS
    class SetUpActivity
    class ListActivity
    class SettingsActivity
    SettingsActivity o-- Persistence
    
    KlaxonReceiver o-- Klaxon
    Klaxon o-- IAlarms
    Klaxon o-- Persistence
    ListActivity o-right- SetUpActivity
    ListActivity o-- IAlarms
    SetUpActivity o-- IAlarms
    AlertActivity o-- IAlarms
    AlertActivityFS o-- IAlarms

'Mediators
    class NM
    interface Notifier {
    PLAY, DISMISSED, SNOOZED
    }
    interface Persistence

'model
    interface IAlarms
    class Alarms
    Alarms .down....|> IAlarms

    class AlarmsReceiver
    class AlarmsService
    AlarmsReceiver o-- AlarmsService
    AlarmsService o-- Alarms

    class Repository
    Alarms o..right..o Repository : obs

    class ListNotifier
    Alarms o..left..o ListNotifier : obs
    
    class Alarm {
        Calendar getCalendar(CalendarType)
    }
    Alarms o-- Alarm
    class Comparator {
        createComparator(List<CalendarType>, Calendar now)
        int compare(Alarm, Alarm)
        boolean hasActiveCalendar(Alarm)
        Pair<CalendarType, Calendar> getActiveCalendar(Alarm)
    }
    Alarms o-- Comparator
    
    interface IScheduler
    class Scheduler
    Scheduler .down.|> IScheduler
    Alarms o-- IScheduler
    
    interface AlarmManager
    Scheduler o-up- AlarmManager
    AlarmManager o-- AlarmsReceiver

@enduml